{% extends 'base.html' %}

{% block title %}日記投稿{% endblock %}

{% block content %}
    <h2>日記を投稿</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <!-- フォーム内容 -->
        <div class="form-group">
            <label for="child">子供の名前</label>
            {{ form.child }}
        </div>
        <div class="form-group">
            <label for="content">日記の内容</label>
            {{ form.content }}
        </div>
        <div class="form-group">
            <label for="media">画像や動画をアップロード</label>
            <input type="file" name="media_url" id="media" multiple>
        </div>

        <!-- 選択されたファイル名を表示するリスト -->
        <ul id="file-list"></ul>  <!-- ここにファイル名を表示 -->

        <button type="submit" class="btn btn-primary">投稿する</button>
    </form>
{% endblock %}

{% block extra_js %}
<script>
    document.getElementById('media').addEventListener('change', function() {
        var output = document.getElementById('file-list');
        output.innerHTML = "";// リストをクリア
        console.log(this.files);  // 選択されたファイルの情報をコンソールに出力

        // 選択されたファイルをリスト表示
        for (var i = 0; i < this.files.length; i++) {
            var listItem = document.createElement("li");
            listItem.textContent = this.files[i].name;  // 各ファイルの名前をリストに追加
            output.appendChild(listItem);
        }
    });
</script>
{% endblock %}